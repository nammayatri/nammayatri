-- BharatTaxi User API AccessMatrix entries
-- This migration grants access to all roles with DASHBOARD_USER or DASHBOARD_ADMIN dashboard_access_type

-- Option 1: Grant access to all DASHBOARD_USER and DASHBOARD_ADMIN roles (Recommended)
-- INSERT INTO atlas_bap_dashboard.access_matrix (id, role_id, api_entity, user_access_type, user_action_type, created_at, updated_at)
-- SELECT
--     atlas_bap_dashboard.uuid_generate_v4(),
--     role.id,
--     'BHARAT_TAXI_USER',
--     'USER_FULL_ACCESS',
--     unnest(ARRAY[
--         'BHARAT_TAXI_FROM_LIST',
--         'BHARAT_TAXI_TO_LIST',
--         'BHARAT_TAXI_ESTIMATE',
--         'BHARAT_TAXI_BOOKING',
--         'BHARAT_TAXI_INVOICE',
--         'BHARAT_TAXI_BOOKING_LATEST',
--         'BHARAT_TAXI_BOOKING_BY_ID',
--         'BHARAT_TAXI_UPDATE_BOOKING',
--         'BHARAT_TAXI_VEHICLES_LIST',
--         'BHARAT_TAXI_VEHICLES_CREATE',
--         'BHARAT_TAXI_DRIVERS_LIST',
--         'BHARAT_TAXI_DRIVERS_CREATE'
--     ]),
--     now(),
--     now()
-- FROM atlas_bap_dashboard.role
-- WHERE dashboard_access_type IN ('DASHBOARD_USER', 'DASHBOARD_ADMIN')
-- ON CONFLICT (role_id, api_entity, user_action_type) DO NOTHING;

-- Option 2: Grant access to specific roles by role ID
-- Replace 'ROLE_ID_HERE' with the actual role ID from the role table
-- Example for DASHBOARD_ADMIN role (JUSPAY_ADMIN):
-- INSERT INTO atlas_bap_dashboard.access_matrix (id, role_id, api_entity, user_access_type, user_action_type, created_at, updated_at) VALUES
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_FROM_LIST', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_TO_LIST', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_ESTIMATE', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_BOOKING', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_INVOICE', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_BOOKING_LATEST', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_BOOKING_BY_ID', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_UPDATE_BOOKING', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_VEHICLES_LIST', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_VEHICLES_CREATE', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_DRIVERS_LIST', now(), now()),
--     (atlas_bap_dashboard.uuid_generate_v4(), '37947162-3b5d-4ed6-bcac-08841be1534d', 'BHARAT_TAXI_USER', 'USER_FULL_ACCESS', 'BHARAT_TAXI_DRIVERS_CREATE', now(), now())
-- ON CONFLICT (role_id, api_entity, user_action_type) DO NOTHING;

-- Option 3: Query to check existing roles and their IDs
-- SELECT id, name, dashboard_access_type FROM atlas_bap_dashboard.role ORDER BY name;

