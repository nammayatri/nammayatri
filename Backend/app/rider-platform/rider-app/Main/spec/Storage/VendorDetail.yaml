imports:
  Text: Data.Text
  UTCTime: Kernel.Prelude
  IntegratedBPPConfig: Domain.Types.IntegratedBPPConfig
  MerchantOperatingCity: Domain.Types.MerchantOperatingCity

VendorSplitDetails:
  tableName: vendor_split_details
  types:
    SplitType:
      enum: "FIXED, FLEXIBLE"
    SplitShare:
      enum: "Percentage Double, FixedValue Int"
  fields:
    id : Id VendorSplitDetails
    integratedBPPConfigId : Id IntegratedBPPConfig
    vendorId : Text
    splitType : SplitType
    includeInSplit : Maybe Bool
    splitShare : Maybe SplitShare

  constraints:
    id: PrimaryKey

  excludedFields: [merchantId]
  queries:
    findAllByIntegratedBPPConfigId:
      kvFunction: findAllWithKV
      where: integratedBPPConfigId

    findAllByMerchantOperatingCityIdAndIncludeInSplit:
      kvFunction: findAllWithKV
      where:
        and: [merchantOperatingCityId, includeInSplit]