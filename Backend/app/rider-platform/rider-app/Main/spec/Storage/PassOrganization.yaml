imports:
  Merchant: Domain.Types.Merchant
  MerchantOperatingCity: Domain.Types.MerchantOperatingCity
  Person: Domain.Types.Person
  UTCTime: Data.Time
  PassEnum: Domain.Types.PassType

PassOrganization:
  tableName: pass_organization

  fields:
    id: Id PassOrganization
    name: Text
    personId: Id Person
    address: Maybe Text
    merchantId: Id Merchant
    merchantOperatingCityId: Id MerchantOperatingCity
    createdAt: UTCTime
    updatedAt: UTCTime
    passEnum: PassEnum

  constraints:
    id: PrimaryKey
    personId: SecondaryKey

  sqlType:
    name: text
    address: text

  queries:
    findById:
      kvFunction: findOneWithKV
      where: id

    findByPersonId:
      kvFunction: findOneWithKV
      where: personId

    findByMerchantOperatingCityIdAndPassEnum:
      kvFunction: findAllWithKV
      where:
        and: [merchantOperatingCityId, passEnum]

    updatePassOrganization:
      kvFunction: updateWithKV
      params: [name, address, updatedAt, passEnum]
      where: id

    deleteById:
      kvFunction: deleteWithKV
      where: id

  extraOperations:
    - GENERATE_INDEXES

  excludedFields: [merchantOperatingCityId, merchantId, createdAt, updatedAt]