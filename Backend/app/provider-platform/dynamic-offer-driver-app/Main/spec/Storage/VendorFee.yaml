imports:
  DriverFee: Domain.Types.DriverFee
  Text: Data.Text
  UTCTime: Kernel.Prelude

VendorFee:
  derives: "Generic, Show, Eq, ToSchema, FromJSON, ToJSON"
  tableName: vendor_fee

  types:
    VendorFeeSplitMethod:
      enum: "Payout,Normal"
      derive: "HttpInstance"

  fields:
    driverFeeId : Id DriverFee
    vendorId : Text
    amount : HighPrecMoney
    splitMethod : Maybe VendorFeeSplitMethod
    isVendorFeeProcessedAt : Maybe UTCTime

  constraints:
    driverFeeId: PrimaryKey
    vendorId: PrimaryKey

  excludedFields: [merchantId, merchantOperatingCityId]

  extraOperations:
    - EXTRA_QUERY_FILE

  default:
    splitMethod: "'Normal'"

  beamType:
    splitMethod: Maybe VendorFeeSplitMethod

  fromTType:
    splitMethod: Kernel.Prelude.Just . Kernel.Prelude.fromMaybe Domain.Types.VendorFee.Normal|I
