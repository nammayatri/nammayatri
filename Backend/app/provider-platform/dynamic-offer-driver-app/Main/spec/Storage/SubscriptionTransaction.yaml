imports:
  Merchant: Domain.Types.Merchant
  Driver: Domain.Types.Person
  Ride: Domain.Types.Ride
  Plan: Domain.Types.Plan
  Location: Domain.Types.Location
  HighPrecMoney: Kernel.Types.Common
  UTCTime: Data.Time
  TransactionStatus: Kernel.External.Payment.Juspay.Types.Common
  MerchantOperatingCity: Domain.Types.MerchantOperatingCity

SubscriptionTransaction:
  tableName: subscription_transaction
  derives: "Generic,Show"
  types:
    TransactionType:
      enum: "RIDE,PLAN_PURCHASE"
      derive: "HttpInstance"
  fields:
    id: Id SubscriptionTransaction
    merchantId: Maybe (Id Merchant)
    merchantOperatingCityId: Id MerchantOperatingCity
    driverId: Id Driver
    fleetOwnerId: Maybe (Id Driver)
    entityId: Maybe Text
    transactionType: TransactionType
    amount: HighPrecMoney
    status: TransactionStatus
    runningBalance: HighPrecMoney
    fromLocationId: Maybe (Id Location)
    toLocationId: Maybe (Id Location)
    createdAt: UTCTime
    updatedAt: UTCTime
  constraints:
    id: PrimaryKey
  sqlType:
    amount: numeric(30,2)
    runningBalance: numeric(30,2)
    transactionType: character varying(255)
    status: character varying(255)
  extraOperations:
    - EXTRA_QUERY_FILE
