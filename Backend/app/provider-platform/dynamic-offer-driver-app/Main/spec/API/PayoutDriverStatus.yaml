imports:
  MerchantOperatingCity: Domain.Types.MerchantOperatingCity
  Merchant: Domain.Types.Merchant
  Person: Domain.Types.Person
  Text: Data.Text
  ScheduledPayoutStatus: Lib.Payment.Domain.Types.PayoutStatusHistory

module: PayoutDriverStatus

types:
  DriverPayoutStatusResp:
    status: ScheduledPayoutStatus
    amount: Maybe HighPrecMoney
    rideId: Text
    payoutTransactionId: Maybe Text
    expectedCreditTime: Maybe UTCTime
    failureReason: Maybe Text
    statusHistory: "[DriverPayoutStatusEvent]"
    createdAt: UTCTime
    updatedAt: UTCTime

  DriverPayoutStatusRespSuccess:
    payout: Maybe DriverPayoutStatusResp

  DriverPayoutStatusEvent:
    status: ScheduledPayoutStatus
    timestamp: UTCTime
    message: Maybe Text

apis:
  # Driver App: Get payout status for a ride (driver's own ride)
  - GET:
      endpoint: /payout/{rideId}/status
      auth: TokenAuth PROVIDER_TYPE
      params:
        rideId: Text
      response:
        type: API.Types.UI.PayoutDriverStatus.DriverPayoutStatusRespSuccess
