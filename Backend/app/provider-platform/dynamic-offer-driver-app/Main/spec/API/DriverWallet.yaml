imports:
  Id: Kernel.Types.Id
  UTCTime: Data.Time
  APISuccess: Kernel.Types.APISuccess
  LedgerEntry: Lib.Finance.Domain.Types.LedgerEntry
  Location: Domain.Types.Location
  HighPrecMoney: Kernel.Types.Common
  Ride: Domain.Types.Ride
  PlanSubscribeRes: Domain.Action.UI.Plan
  PayoutRequestStatus: Lib.Payment.Domain.Types.PayoutRequest
  EntityName: Lib.Payment.Domain.Types.Common

module: DriverWallet

types:
  WalletItem:
    itemReference: Text
    itemName: Text
    itemValue: HighPrecMoney
  WalletItemGroup:
    totalAmount: HighPrecMoney
    items: "[WalletItem]"
  WalletSummaryResponse:
    currentBalance: HighPrecMoney
    redeemableBalance: HighPrecMoney
    nonRedeemableBalance: HighPrecMoney
    additions: WalletItemGroup
    deductions: WalletItemGroup
  TopUpRequest:
    amount: HighPrecMoney
    derive: "'HideSecrets"
  PayoutHistoryItem:
    amount: Maybe HighPrecMoney
    payoutFee: HighPrecMoney
    entityName: Maybe EntityName
    status: PayoutRequestStatus
    timestamp: UTCTime
    payoutMethod: Text
    payoutVpa: Maybe Text
  PayoutHistoryResponse:
    totalPaidOut: HighPrecMoney
    lastPayout: Maybe PayoutHistoryItem
    totalPending: HighPrecMoney
    items: "[PayoutHistoryItem]"

apis:
  - GET:
      endpoint: /wallet/transactions
      auth: TokenAuth PROVIDER_TYPE
      query:
        - fromDate: UTCTime
        - toDate: UTCTime
      response:
        type: WalletSummaryResponse
  - POST:
      endpoint: /wallet/payout
      auth: TokenAuth PROVIDER_TYPE
      response:
        type: APISuccess
  - POST:
      endpoint: /wallet/topup
      auth: TokenAuth PROVIDER_TYPE
      request:
        type: TopUpRequest
      response:
        type: PlanSubscribeRes
  - GET:
      endpoint: /wallet/payoutHistory
      auth: TokenAuth PROVIDER_TYPE
      query:
        - from: UTCTime
        - to: UTCTime
        - status: "[PayoutRequestStatus]"
        - limit: Int
        - offset: Int
      response:
        type: PayoutHistoryResponse
