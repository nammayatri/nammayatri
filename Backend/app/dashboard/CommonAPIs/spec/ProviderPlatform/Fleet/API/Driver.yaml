imports:
  Driver: Dashboard.Common
  Summary: Dashboard.Common
  Image: Dashboard.Common
  VehicleCategory: Dashboard.Common
  VehicleVariant: Dashboard.Common
  VerificationStatus: Dashboard.Common
  TripTransaction: Dashboard.Common
  ServiceNames: Dashboard.Common.Driver
  FCMRecipientToken: Kernel.External.Notification.FCM.Types
  RegisterRCReq: Dashboard.ProviderPlatform.Management.DriverRegistration
  AuthReq: Dashboard.ProviderPlatform.Management.DriverRegistration
  AuthRes: Dashboard.ProviderPlatform.Management.DriverRegistration
  Day: Data.Time
  RideStatus:
  EmptyDynamicParam: Domain.Types.EmptyDynamicParam
  LatLong: Kernel.External.Maps.Types
  TimeBound: Kernel.Types.TimeBound
  ActionSource: Dashboard.Common
  FleetBadgeType: Domain.Types.FleetBadgeType
  Role: Dashboard.Common
module: Driver

apis:
  - GET:
      endpoint: /fleet/access/list
      auth: ApiAuthV2
      query:
        fleetMemberId: Text
      response:
        type: FleetOwnerListRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_OWNER_LIST

  - POST:
      endpoint: /fleet/access/{fleetOwnerId}/select
      auth: ApiAuthV2
      params:
        fleetOwnerId: Text
      mandatoryQuery:
        enable: Bool
      query:
        onlySingle: Bool
        fleetMemberId: Text
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_OWNER_ACCESS

  - POST:
      endpoint: /fleet/v2/access/select
      auth: ApiAuthV2
      mandatoryQuery:
        enable: Bool
      query:
        onlyCurrent: Bool
        fleetOwnerId: Text
        groupCode: Text
        fleetMemberId: Text
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_OWNER_ACCESS_SELECT

  - POST: # BulkUploadVehiclesForFleetAPI
      endpoint: /fleet/addVehicles
      auth: ApiAuthV2
      multipart:
        type: CreateVehiclesReq
      query:
        - fleetOwnerId: Text
      response:
        type: APISuccessWithUnprocessedEntities
      helperApi:
        - POST:
            endpoint: /fleet/addVehicles
            auth: ApiAuthV2
            multipart:
              type: CreateVehiclesReq
            response:
              type: APISuccessWithUnprocessedEntities
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET ADD_VEHICLES

  - POST: # AddVehicleForFleetAPI
      endpoint: /{mobileNo}/fleet/addVehicle
      auth: ApiAuthV2
      params:
        mobileNo: Text
      query:
        - countryCode: Text
        - fleetOwnerId: Text
        - mbRole: Role
      request:
        type: AddVehicleReq
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET ADD_VEHICLE_FLEET
      validation: API.Types.ProviderPlatform.Fleet.Driver.validateAddVehicleReq
      helperApi:
        - POST:
            endpoint: /{mobileNo}/{requestorId}/fleet/addVehicle # get requestorId from apiToken
            auth: ApiAuthV2
            params:
              mobileNo: Text
              requestorId: Text
            query:
              - mobileCountryCode: Text
              - fleetOwnerId : Text
              - mbRole: Role
            request:
              type: AddVehicleReq
            response:
              type: APISuccess
            validation: API.Types.ProviderPlatform.validateAddVehicleReq

  - GET: # GetAllDriverRequestsAPI
      endpoint: /fleet/getDriverRequests
      auth: ApiAuthV2
      query:
        - mbFrom: UTCTime
        - mbTo: UTCTime
        - mbRequestType: Domain.Types.Alert.AlertRequestType.AlertRequestType
        - mbRouteCode: Text
        - mbDriverId: Text
        - mbBadgeName: Text
        - mbFleetOwnerId: Text
        - mbalertStatus: Domain.Types.Alert.AlertRequestStatus.AlertRequestStatus
        - mbLimit: Int
        - mbOffset: Int
      response:
        type: DriverRequestRespT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_DRIVER_REQUESTS
      # helperApi:
      #   - GET:
      #       endpoint: /fleet/driverRequests/{fleetOwnerId}
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - from: UTCTime
      #         - to: UTCTime
      #         - requestType: Domain.Types.Alert.AlertRequestType.AlertRequestType
      #         - routeCode: Text
      #         - driverId: Text
      #         - badgeName: Text
      #         - limit: Int
      #         - offset: Int
      #       response:
      #         type: DriverRequestResp

  - POST: # RespondDriverRequestsAPI
      endpoint: /fleet/respond/driverRequest
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      request:
        type: RequestRespondReq
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET RESPOND_DRIVER_REQUEST
      helperApi:
        - POST:
            endpoint: /fleet/{fleetOwnerId}/driverRequest/respond
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            request:
              type: RequestRespondReq
            response:
              type: APISuccess

  - POST: # RegisterRCForFleetWithoutDriverAPI
      endpoint: /fleet/addRC/withoutDriver
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      request:
        type: RegisterRCReq
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET ADD_RC_FLEET_WITHOUT_DRIVER
      helperApi:
        - POST:
            endpoint: /{fleetOwnerId}/fleet/addRC/withoutDriver
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            request:
              type: RegisterRCReq
            response:
              type: APISuccess

  - GET: # GetAllVehicleForFleetAPI
      endpoint: /fleet/getAllVehicle
      auth: ApiAuthV2
      query:
        - mblimit: Int
        - mboffset: Int
        - mbRegNumberString: Text
        - mbFleetOwnerId: Text
        - mbIsActive: Bool
        - mbMemberPersonId: Text
      response:
        type: ListVehicleResT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_ALL_VEHICLE_FOR_FLEET
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/getAllVehicle
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - limit: Int
      #         - offset: Int
      #         - mbRegNumberString: Text
      #         - mbIsActive: Bool
      #         - mbMemberPersonId: Text
      #       response:
      #         type: ListVehicleRes

  - GET: # GetAllDriverForFleetAPI
      endpoint: /fleet/getAllDriver
      auth: ApiAuthV2
      query:
        - mblimit: Int
        - mboffset: Int
        - mbMobileNumberString: Text
        - mbNameString: Text
        - mbSearchString: Text
        - mbFleetOwnerId: Text
        - mbIsActive: Bool
        - mbMemberPersonId: Text
      response:
        type: FleetListDriverResT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_ALL_DRIVERS_FOR_FLEET
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/getAllDriver
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - limit: Int
      #         - offset: Int
      #         - mobileNumberString: Text
      #         - nameString: Text
      #         - mbSearchString: Text
      #         - isActive: Bool
      #       response:
      #         type: FleetListDriverRes

  - GET: # GetAllBadgeForFleetAPI
      endpoint: /fleet/getAllBadge
      auth: ApiAuthV2
      query:
        - mblimit: Int
        - mboffset: Int
        - mbSearchString: Text
        - mbFleetOwnerId: Text
        - mbBadgeType: FleetBadgeType
        - mbIsActive: Bool
        - mbMemberPersonId: Text
      response:
        type: FleetBadgeResT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_ALL_BADGES_FOR_FLEET
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/getAllBadge
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - limit: Int
      #         - offset: Int
      #         - mbSearchString: Text
      #         - mbBadgeType: FleetBadgeType
      #         - mbIsActive: Bool
      #       response:
      #         type: FleetBadgeRes

  - POST: # FleetUnlinkVehicleAPI
      endpoint: /{driverId}/{vehicleNo}/fleet/unlink
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      params:
        driverId: Id Driver
        vehicleNo: Text
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_UNLINK_VEHICLE
      helperApi:
        - POST:
            endpoint: /{requestorId}/{driverId}/{vehicleNo}/fleet/unlink
            auth: ApiAuthV2
            params:
              driverId: Id Driver
              vehicleNo: Text
              requestorId: Text
            query:
              fleetOwnerId: Text
            response:
              type: APISuccess

  - POST: # FleetRemoveVehicleAPI
      endpoint: /{vehicleNo}/fleet/remove/vehicle
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      params:
        vehicleNo: Text
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_REMOVE_VEHICLE
      helperApi:
        - POST:
            endpoint: /{fleetOwnerId}/{vehicleNo}/fleet/remove/vehicle
            auth: ApiAuthV2
            params:
              vehicleNo: Text
              fleetOwnerId: Text
            query:
              - requestorId: Text
            response:
              type: APISuccess

  - POST: # FleetRemoveDriverAPI
      endpoint: /{driverId}/fleet/remove/driver
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      params:
        driverId: Id Driver
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_REMOVE_DRIVER
      helperApi:
        - POST:
            endpoint: /{requestorId}/{driverId}/fleet/remove/driver
            auth: ApiAuthV2
            params:
              driverId: Id Driver
              requestorId: Text
            query:
              - fleetOwnerId: Text
            response:
              type: APISuccess

  - GET: # FleetTotalEarningAPI
      endpoint: /fleet/totalEarning
      auth: ApiAuthV2
      query:
        - from: UTCTime
        - to: UTCTime
      response:
        type: FleetTotalEarningResponse
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_TOTAL_EARNING
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/totalEarning
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - from: UTCTime
              - to: UTCTime
            response:
              type: FleetTotalEarningResponse

  - GET: # FleetVehicleEarningAPI
      endpoint: /fleet/vehicleEarning
      auth: ApiAuthV2
      query:
        - vehicleNo: Text
        - limit: Int
        - offset: Int
        - from: UTCTime
        - to: UTCTime
      response:
        type: FleetEarningListRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_VEHICLE_EARNING
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/vehicleEarning
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - vehicleNo: Text
              - limit: Int
              - offset: Int
              - from: UTCTime
              - to: UTCTime
            response:
              type: FleetEarningListRes

  - GET: # FleetDriverEarningAPI
      endpoint: /fleet/driverEarning
      auth: ApiAuthV2
      query:
        - mobileCountryCode: Text
        - mobileNo: Text
        - limit: Int
        - offset: Int
        - from: UTCTime
        - to: UTCTime
        - sortDesc: Bool
        - sortOn: SortOn
      response:
        type: FleetEarningListRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET FLEET_DRIVER_EARNING
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/driverEarning
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - mobileCountryCode: Text
              - mobileNo: Text
              - limit: Int
              - offset: Int
              - from: UTCTime
              - to: UTCTime
              - sortDesc: Bool
              - SortOn: SortOn
            response:
              type: FleetEarningListRes

  - GET: # GetFleetDriverVehicleAssociationAPI
      endpoint: /fleet/driverVehicleAssociation
      auth: ApiAuthV2
      query:
        - Limit: Int
        - Offset: Int
        - countryCode: Text
        - phoneNo: Text
        - vehicleNo: Text
        - includeStats: Bool
        - from: UTCTime
        - to: UTCTime
      response:
        type: DrivertoVehicleAssociationRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_DRIVER_VEHICLE_ASSOCIATION
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/getFleetDriverVehicleAssociation
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - limit: Int
              - offset: Int
              - countryCode: Text
              - phoneNo: Text
              - vehicleNo: Text
              - includeStats: Bool
              - from: UTCTime
              - to: UTCTime
            response:
              type: DrivertoVehicleAssociationRes

  - GET: # GetFleetDriverAssociationAPI
      endpoint: /fleet/driverAssociation
      auth: ApiAuthV2
      query:
        - isActive: Bool
        - Limit: Int
        - Offset: Int
        - countryCode: Text
        - phoneNo: Text
        - includeStats: Bool
        - from: UTCTime
        - to: UTCTime
        - status: DriverMode
        - name: Text
        - mbSearchString: Text
        - fleetOwnerId: Text
        - mbRequestorId: Text
        - hasFleetMemberHierarchy: Bool
        - isRequestorFleerOwner: Bool
      response:
        type: DrivertoVehicleAssociationResT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_DRIVER_ASSOCIATION
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/getFleetDriverAssociation
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - isActive: Bool
      #         - limit: Int
      #         - offset: Int
      #         - countryCode: Text
      #         - phoneNo: Text
      #         - includeStats: Bool
      #         - from: UTCTime
      #         - to: UTCTime
      #         - status: DriverMode
      #         - name: Text
      #         - mbSearchString: Text
      #         - requestorId: Text
      #       response:
      #         type: DrivertoVehicleAssociationRes

  - GET: # GetFleetVehicleAssociationAPI
      endpoint: /fleet/vehicleAssociation
      auth: ApiAuthV2
      query:
        - Limit: Int
        - Offset: Int
        - vehicleNo: Text
        - includeStats: Bool
        - from: UTCTime
        - to: UTCTime
        - status: FleetVehicleStatus
        - mbSearchString: Text
        - statusAwareVehicleNo: Text
        - fleetOwnerId: Text
        - mbRequestorId: Text
        - hasFleetMemberHierarchy: Bool
        - isRequestorFleerOwner: Bool
      response:
        type: DrivertoVehicleAssociationResT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_VEHICLE_ASSOCIATION
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/getFleetVehicleAssociation
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #       query:
      #         - limit: Int
      #         - offset: Int
      #         - vehicleNo: Text
      #         - includeStats: Bool
      #         - from: UTCTime
      #         - to: UTCTime
      #         - status: FleetVehicleStatus
      #         - mbSearchString: Text
      #         - statusAwareVehicleNo: Text
      #         - requestorId: Text
      #       response:
      #         type: DrivertoVehicleAssociationRes

  - POST: # SetVehicleDriverRcStatusForFleetAPI
      endpoint: /{driverId}/fleet/vehicleDriverRCstatus
      name: PostDriverFleetVehicleDriverRcStatus
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      params:
        driverId: Id Driver
      request:
        type: RCStatusReq
      response:
        type: APISuccess
      helperApi:
        - POST:
            endpoint: /{driverId}/{requestorId}/fleet/vehicleDriverRCstatus
            auth: ApiAuthV2
            params:
              driverId: Id Driver
              requestorId: Text
            query:
              - fleetOwnerId: Text
            request:
              type: RCStatusReq
            response:
              type: APISuccess
      migrate:
        endpoint: DriverAPI SetVehicleDriverRcStatusForFleetEndpoint
        endpointV2:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET SET_VEHICLE_DRIVER_RC_STATUS_FOR_FLEET

  - POST: # UpdateFleetOwnerInfoAPI
      endpoint: /{driverId}/updateFleetOwnerInfo
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      params:
        driverId: Id Driver
      request:
        type: UpdateFleetOwnerInfoReq
      response:
        type: APISuccess
      helperApi:
        - POST:
            endpoint: /{driverId}/updateFleetOwnerInfo
            auth: ApiAuthV2
            params:
              driverId: Id Driver
            request:
              type: UpdateFleetOwnerInfoReq
            response:
              type: APISuccess
      migrate:
        endpoint: DriverAPI UpdateFleetOwnerEndPoint
        endpointV2:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET UPDATE_FLEET_OWNER_INFO

  - GET: # GetFleetOwnerInfoAPI
      endpoint: /{driverId}/fleetOwnerInfo
      auth: ApiAuthV2
      params:
        driverId: Id Driver
      response:
        type: FleetOwnerInfoRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET GET_FLEET_OWNER_INFO

  - POST: # SendFleetJoiningOtpAPI
      endpoint: /fleet/sendJoiningOtp
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      request:
        type: AuthReq
      response:
        type: AuthRes
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET SEND_FLEET_JOINING_OTP
      helperApi:
        - POST:
            endpoint: /{fleetOwnerName}/fleet/driver/sendJoiningOtp
            auth: ApiAuthV2
            params:
              fleetOwnerName: Text
            query:
              - fleetOwnerId: Text
              - requestorId: Text
            request:
              type: AuthReq
            response:
              type: AuthRes

  - POST: # VerifyFleetJoiningOtpAPI
      endpoint: /fleet/verifyJoiningOtp
      auth: ApiAuthV2
      query:
        - authId: Text
        - fleetOwnerId: Text
      request:
        type: VerifyFleetJoiningOtpReq
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET VERIFY_FLEET_JOINING_OTP
      helperApi:
        - POST:
            endpoint: /{fleetOwnerId}/fleet/driver/verifyJoiningOtp
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - authId: Text
              - requestorId: Text
            request:
              type: VerifyFleetJoiningOtpReq
            response:
              type: APISuccess

  - GET:
      endpoint: /fleet/routes
      auth: ApiAuthV2
      query:
        - mbCurrentLocation: LatLong
        - mbSearchString: Text
        - fleetOwnerId: Text
      mandatoryQuery:
        - limit: Int
        - offset: Int
      response:
        type: RouteAPIResp
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET WMB_ROUTES_API
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/routes
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - mbCurrentLocation: LatLong
              - mbSearchString: Text
            mandatoryQuery:
              - limit: Int
              - offset: Int
            response:
              type: RouteAPIResp

  - GET:
      endpoint: /fleet/possibleRoutes
      auth: ApiAuthV2
      mandatoryQuery:
        startStopCode: Text
      query:
        fleetOwnerId: Text
      response:
        type: RouteAPIResp
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET WMB_POSSIBLE_ROUTES_API
      helperApi:
        - GET:
            endpoint: /{fleetOwnerId}/fleet/possibleRoutes
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            mandatoryQuery:
              startStopCode: Text
            response:
              type: RouteAPIResp

  - POST:
      endpoint: /fleet/tripPlanner
      auth: ApiAuthV2
      request:
        type: TripPlannerReq
      query:
        - fleetOwnerId: Text
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET WMB_TRIP_PLANNER_API
      helperApi:
        - POST:
            endpoint: /{fleetOwnerId}/fleet/tripPlanner
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            request:
              type: TripPlannerReq
            response:
              type: APISuccess

  - GET:
      endpoint: /fleet/trip/transactions/{driverId}
      auth: ApiAuthV2
      params:
        driverId: Id Driver
      mandatoryQuery:
        - limit: Int
        - offset: Int
      query:
        - mbFrom: UTCTime
        - mbTo: UTCTime
        - mbVehicleNumber: Text
        - fleetOwnerId: Text
        - mbMemberPersonId: Text
      response:
        type: TripTransactionRespT
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET WMB_TRIP_TRANSACTIONS_API
      # helperApi:
      #   - GET:
      #       endpoint: /{fleetOwnerId}/fleet/trip/transactions/{driverId}
      #       auth: ApiAuthV2
      #       params:
      #         fleetOwnerId: Text
      #         driverId: Id Driver
      #       mandatoryQuery:
      #         - limit: Int
      #         - offset: Int
      #       query:
      #         - mbFrom: UTCTime
      #         - mbTo: UTCTime
      #         - mbVehicleNumber: Text
      #       response:
      #         type: TripTransactionResp

  - POST: # BulkUploadDriversForFleetAPI
      endpoint: /fleet/addDrivers
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      multipart:
        type: CreateDriversReq
      response:
        type: APISuccessWithUnprocessedEntities
      helperApi:
        - POST:
            endpoint: /fleet/addDrivers
            auth: ApiAuthV2
            query:
              - requestorId: Text
            multipart:
              type: CreateDriversReq
            response:
              type: APISuccessWithUnprocessedEntities
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET ADD_DRIVERS

  - POST: # Add Driver Bus Route Bulk Mapping
      endpoint: /fleet/addDriverBusRouteMapping
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      multipart:
        type: CreateDriverBusRouteMappingReq
      response:
        type: APISuccessWithUnprocessedEntities
      helperApi:
        - POST:
            endpoint: /fleet/addDriverBusRouteMapping
            auth: ApiAuthV2
            multipart:
              type: CreateDriverBusRouteMappingReq
            response:
              type: APISuccessWithUnprocessedEntities
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET ADD_DRIVER_BUS_ROUTE_MAPPING

  - POST: # LinkRCWithDriverForFleetAPI
      endpoint: /fleet/linkRCWithDriver
      auth: ApiAuthV2
      query:
        - fleetOwnerId: Text
      request:
        type: LinkRCWithDriverForFleetReq
      response:
        type: APISuccess
      migrate:
        userActionType: ApiAuth DRIVER_OFFER_BPP_MANAGEMENT FLEET LINK_RC_WITH_DRIVER
      helperApi:
        - POST:
            endpoint: /fleet/linkRCWithDriver/{fleetOwnerId}
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            query:
              - requestorId: Text
            request:
              type: LinkRCWithDriverForFleetReq
            response:
              type: APISuccess

  - POST:
      endpoint: /dashboard/fleet/wmb/trip/{tripTransactionId}/end
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
        terminationSource: ActionSource
      params:
        tripTransactionId: Id TripTransaction
      response:
        type: APISuccess
      helperApi:
        - POST:
            endpoint: /dashboard/fleet/wmb/trip/{tripTransactionId}/{fleetOwnerId}/end
            auth: ApiAuthV2
            query:
              terminationSource: ActionSource
            params:
              tripTransactionId: Id TripTransaction
              fleetOwnerId: Text
            response:
              type: APISuccess

  - GET: # Retrieve the route details
      endpoint: /fleet/wmb/route/{routeCode}/details
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      params:
        routeCode: Text
      response:
        type: RouteDetails
      helperApi:
        - GET:
            endpoint: /fleet/{fleetOwnerId}/wmb/route/{routeCode}/details
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
              routeCode: Text
            response:
              type: RouteDetails

  - POST:
      endpoint: /fleet/getNearbyDrivers
      auth: ApiAuthV2
      request:
        type: NearbyDriverReq
      response:
        type: NearbyDriverRespT
      helperApi:
        - POST:
            endpoint: /fleet/getNearbyDrivers/{fleetOwnerId}
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            request:
              type: NearbyDriverReq
            response:
              type: NearbyDriverResp

  - POST:
      endpoint: /dashboard/fleet/track/driver
      auth: ApiAuthV2
      query:
        fleetOwnerId: Text
      request:
        type: TrackDriverLocationsReq
      response:
        type: TrackDriverLocationsRes
      helperApi:
        - POST:
            endpoint: /dashboard/fleet/track/driver/{fleetOwnerId}
            auth: ApiAuthV2
            params:
              fleetOwnerId: Text
            request:
              type: TrackDriverLocationsReq
            response:
              type: TrackDriverLocationsRes
  - GET:
      endpoint: /dashboard/internal/helper/getFleetOwnerId
      auth: NoAuth
      mandatoryQuery:
        - memberPersonId: Text
      query:
        - mbFleetOwnerId: Text
      response:
        type: Text
  - GET:
      endpoint: /dashboard/internal/helper/getFleetOwnerIds
      auth: NoAuth
      mandatoryQuery:
        - memberPersonId: Text
      query:
        - mbFleetOwnerId: Text
      response:
        type: "[(Kernel.Prelude.Text, Kernel.Prelude.Text)]"
types:
  NearbyDriverReq:
    - point: LatLong
    - radius: Int
    - derive: "'HideSecrets"
  NearbyDriverResp:
    - drivers: [DriverInfo]
  NearbyDriverRespT:
    - drivers: [DriverInfoT]
  DriverInfo:
    - routeCode: Text
    - driverName: Text
    - vehicleNumber: Text
    - rideStatus: RideStatus
    - routeLongName: Maybe Text
    - point: LatLong
  DriverInfoT:
    - routeCode: Text
    - driverName: Text
    - vehicleNumber: Text
    - rideStatus: RideStatus
    - routeLongName: Maybe Text
    - point: LatLong
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  RideStatus:
    enum: ON_PICKUP | ON_RIDE
  TrackDriverLocationsReq:
    - recordType: NewType
    - driverIds: [Id Driver]
  TrackDriverLocation:
    - driverId: Id Driver
    - point: LatLong
    - lastUpdatedAt: UTCTime
  TrackDriverLocationsRes:
    - recordType: NewType
    - driverLocations: [TrackDriverLocation]
  TripStatus:
    - enum: "TRIP_ASSIGNED, CANCELLED, IN_PROGRESS, PAUSED, COMPLETED, UPCOMING"
    - derive': "Show, Eq, Ord, Read, Generic, ToJSON, FromJSON, ToSchema, Kernel.Prelude.ToParamSchema"
  RoundTripDetail:
    - frequency: Int
  TripDetails:
    - routeCode: Text
    - roundTrip: Maybe RoundTripDetail
  TripPlannerReq:
    - driverId: Id Driver
    - badgeName: Maybe Text # TODO :: To be deprecated, and replaced with driverBadgeName
    - driverBadgeName: Maybe Text
    - conductorBadgeName: Maybe Text
    - vehicleNumber: Text
    - trips: [TripDetails]
    - derive: "'HideSecrets"
  FleetOwnerListRes:
    - recordType: NewType
    - ownersList: [FleetOwnerListAPIEntity]
  FleetGroup:
    - level: Int
    - parentGroupCode: Maybe Text # At Initial Level, this will be Nothing
    - groupCode: Text
  FleetOwnerListAPIEntity:
    - fleetOwnerId: Text
    - fleetOwnerName: Text
    - fleetGroup: Maybe FleetGroup
    - order: Maybe Int
    - enabled: Bool
  TripTransactionDetail:
    - tripTransactionId: Id TripTransaction
    - routeCode: Text
    - tripStartTime: Maybe UTCTime
    - tripEndTime: Maybe UTCTime
    - tripStatus: TripStatus
  TripTransactionDetailT:
    - tripTransactionId: Id TripTransaction
    - routeCode: Text
    - tripStartTime: Maybe UTCTime
    - tripEndTime: Maybe UTCTime
    - tripStatus: TripStatus
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  TripTransactionResp:
    - trips: [TripTransactionDetail]
    - totalTrips: Int
    - summary: Summary
  TripTransactionRespT:
    - trips: [TripTransactionDetailT]
    - totalTrips: Int
    - summary: Summary
  AddVehicleReq:
    - registrationNo: Text
    - vehicleClass: Text
    - capacity: Maybe Int
    - colour: Text
    - energyType: Maybe Text
    - model: Text
    - make: Text
    - airConditioned: Maybe Bool
    - driverName: Maybe Text
    - imageId: Maybe (Id Image)
    - vehicleCategory: Maybe VehicleCategory
    - oxygen: Maybe Bool
    - ventilator: Maybe Bool
    - dateOfRegistration: Maybe UTCTime
    - mYManufacturing: Maybe Day
    - vehicleModelYear: Maybe Int
    - vehicleTags: Maybe [Text]
    - fuelType: Maybe Text
    - derive: "'HideSecrets"
  ListVehicleResT:
    - recordType: NewType
    - vehicles: [VehicleAPIEntityT]
  ListVehicleRes:
    - recordType: NewType
    - vehicles: [VehicleAPIEntity]
  VehicleAPIEntity:
    - variant: Maybe VehicleVariant
    - model: Maybe Text
    - color: Maybe Text
    - registrationNo: Text
    - isActive: Maybe Bool
  VehicleAPIEntityT:
    - variant: Maybe VehicleVariant
    - model: Maybe Text
    - color: Maybe Text
    - registrationNo: Text
    - isActive: Maybe Bool
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  FleetBadgeRes:
    - recordType: NewType
    - fleetBadgeInfos: [FleetBadgesAPIEntity]
  FleetBadgeResT:
    - recordType: NewType
    - fleetBadgeInfos: [FleetBadgesAPIEntityT]
  FleetBadgesAPIEntity:
    - badgeName: Text
    - isActive: Bool
    - badgeType: FleetBadgeType
  FleetBadgesAPIEntityT:
    - badgeName: Text
    - isActive: Bool
    - badgeType: FleetBadgeType
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  FleetListDriverResT:
    - fleetDriversInfos: [FleetDriversAPIEntityT]
  FleetListDriverRes:
    - recordType: NewType
    - fleetDriversInfos: [FleetDriversAPIEntity]
  FleetDriversAPIEntity:
    - driverId: Id Driver
    - firstName: Text
    - middleName: Maybe Text
    - lastName: Maybe Text
    - mobileNumber: Maybe Text
    - mobileCountryCode: Maybe Text
    - isActive: Maybe Bool
  FleetDriversAPIEntityT:
    - driverId: Id Driver
    - firstName: Text
    - middleName: Maybe Text
    - lastName: Maybe Text
    - mobileNumber: Maybe Text
    - mobileCountryCode: Maybe Text
    - isActive: Maybe Bool
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  FleetTotalEarningResponse:
    - totalRides: Int
    - totalEarning: Int
    - totalVehicle: Int
    - conversionRate: Double
    - cancellationRate: Double
    - cancelledRides: Int
    - totalDistanceTravelled: Double
  FleetEarningListRes:
    - fleetEarningRes: [FleetEarningRes]
    - summary: Summary
  SortOn:
    - enum: "COMPLETED_RIDES, CANCELLED_RIDES"
    - derive: "HttpInstance"
  FleetEarningRes:
    - totalRides: Int
    - totalEarning: Int
    - vehicleNo: Maybe Text
    - driverId: Maybe (Id Driver)
    - driverName: Maybe Text
    - status: Maybe DriverMode
    - vehicleType: Maybe VehicleVariant
    - totalDuration: TotalDuration
    - distanceTravelled: Double
    - driverPhoneNo: Maybe Text
    - cancelledRides: Int
  TotalDuration:
    - hours: Int
    - minutes: Int
  FleetVehicleStatus:
    - enum: "Active, InActive, Valid, Invalid, Pending, OnRide, TripAssigned"
    - derive: "HttpInstance"
  DrivertoVehicleAssociationRes:
    - fleetOwnerId: Text
    - listItem: [DriveVehicleAssociationListItem]
    - summary: Summary
  DrivertoVehicleAssociationResT:
    - fleetOwnerId: Text
    - listItem: [DriveVehicleAssociationListItemT]
    - summary: Summary
  RCStatusReq:
    - rcNo: Text
    - isActivate: Bool
    - serviceName: Maybe ServiceNames
    - planToAssociate: Maybe Text
    - derive: "'HideSecrets"
  DriveVehicleAssociationListItem:
    - driverId: Maybe Text
    - vehicleNo: Maybe Text
    - driverName: Maybe Text
    - conductorName: Maybe Text
    - status: Maybe DriverMode
    - driverPhoneNo: Maybe Text
    - completedRides: Int # will remove this
    - vehicleType: Maybe VehicleVariant
    - earning: Int # this also
    - isDriverOnRide: Maybe Bool
    - isDriverOnPickup: Maybe Bool
    - isDriverActive: Bool
    - isRcAssociated: Bool
    - verificationDocsStatus: Maybe VerificationDocsStatus
    - upcomingRouteCode: Maybe Text
  DriveVehicleAssociationListItemT:
    - driverId: Maybe Text
    - vehicleNo: Maybe Text
    - driverName: Maybe Text
    - conductorName: Maybe Text
    - status: Maybe DriverMode
    - driverPhoneNo: Maybe Text
    - completedRides: Int # will remove this
    - vehicleType: Maybe VehicleVariant
    - earning: Int # this also
    - isDriverOnRide: Maybe Bool
    - isDriverOnPickup: Maybe Bool
    - isDriverActive: Bool
    - isRcAssociated: Bool
    - verificationDocsStatus: Maybe VerificationDocsStatus
    - upcomingRouteCode: Maybe Text
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  VerificationDocsStatus:
    - vehicleRegistrationCertificate: Maybe VerificationStatus
    - vehiclePermit: Maybe VerificationStatus
    - vehicleFitness: Maybe VerificationStatus
    - vehicleInsurance: Maybe VerificationStatus
    - vehiclePUC: Maybe VerificationStatus
    - driverLicense: Maybe VerificationStatus
    - panCard: Maybe VerificationStatus
    - aadhaarCard: Maybe VerificationStatus
  DriverMode:
    - enum: "ONLINE, OFFLINE, SILENT"
    - derive: "HttpInstance"
  UpdateFleetOwnerInfoReq:
    - firstName: Maybe Text
    - lastName: Maybe Text
    - mobileNo: Maybe Text
    - mobileCountryCode: Maybe Text
    - email: Maybe Text
    - derive: "'HideSecrets"
  CreateDriversReq:
    - file: FilePath
    - fleetOwnerId: Maybe Text
    - derive: "'HideSecrets"
  CreateVehiclesReq:
    - file: FilePath
    - fleetOwnerId: Maybe Text
    - requestorId: Maybe Text
    - derive: "'HideSecrets"
  FleetOwnerInfoRes:
    - blocked: Bool
    - enabled: Bool
    - fleetType: Text
    - verified: Bool
    - gstNumber: Maybe Text
    - gstImageId: Maybe Text
    - panNumber: Maybe Text
    - aadhaarNumber: Maybe Text
    - fleetConfig: Maybe FleetConfig
    - operatorName: Maybe Text
    - operatorContact: Maybe Text
    - referralCode: Maybe Text
    - registeredAt: Maybe UTCTime
    - businessLicenseNumber: Maybe Text
    - derive: "'HideSecrets"
  FleetConfig:
    - allowAutomaticRoundTripAssignment: Bool
    - allowEndingMidRoute: Bool
    - allowStartRideFromQR: Bool
    - endRideDistanceThreshold: HighPrecMeters
    - rideEndApproval: Bool
    - derive: "'HideSecrets"
  VerifyFleetJoiningOtpReq:
    - mobileCountryCode: Text
    - mobileNumber: Text
    - otp: Text
    - deviceToken: Maybe FCMRecipientToken
    - derive: "'HideSecrets"
  LinkRCWithDriverForFleetReq:
    - driverMobileCountryCode: Maybe Text
    - driverMobileNumber: Text
    - vehicleRegistrationNumber: Text
    - derive: "'HideSecrets"
  DriverRequestDetails:
    - requestData: Domain.Types.Alert.AlertRequestData.AlertRequestData
    - title: Text
    - body: Text
    - raisedAt: UTCTime
    - status: Maybe Domain.Types.Alert.AlertRequestStatus
    - approvalRequestId: Text
    - routeCode: Text
    - driverId: Text
    - tripTransactionId: Text
    - isViolated: Bool
  DriverRequestDetailsT:
    - requestData: Domain.Types.Alert.AlertRequestData.AlertRequestData
    - title: Text
    - body: Text
    - raisedAt: UTCTime
    - status: Maybe Domain.Types.Alert.AlertRequestStatus
    - approvalRequestId: Text
    - routeCode: Text
    - driverId: Text
    - tripTransactionId: Text
    - isViolated: Bool
    - fleetOwnerId: Text
    - fleetOwnerName: Text
  RequestRespondReq:
    - status: Domain.Types.Alert.AlertRequestStatus
    - approvalRequestId: Text
    - reason: Text
    - derive: "'HideSecrets"
  DriverRequestResp:
    - recordType: NewType
    - requests: [DriverRequestDetails]
  DriverRequestRespT:
    - recordType: NewType
    - requests: [DriverRequestDetailsT]
  RouteAPIResp:
    - listItem: [RouteRespItem]
    - summary: Summary
    - derive: "'HideSecrets"
  RouteRespItem:
    - code: Text
    - shortName: Text
    - longName: Text
    - startPoint: LatLong
    - endPoint: LatLong
    - distance: Maybe Meters
    - totalStops: Maybe Int
    - waypoints: Maybe [LatLong]
    - timeBounds: Maybe TimeBound
    - derive: "'HideSecrets"
  CreateDriverBusRouteMappingReq:
    - file: FilePath
    - fleetOwnerId: Maybe Text
    - derive: "'HideSecrets"
  APISuccessWithUnprocessedEntities:
    - recordType: NewType
    - unprocessedEntities: [Text]
  StopInfo:
    name: Text
    code: Text
    point: LatLong
    derive: "'HideSecrets"
  RouteDetails:
    - code: Text
    - shortName: Text
    - longName: Text
    - startPoint: LatLong
    - endPoint: LatLong
    - stops: [StopInfo]
    - waypoints: Maybe [LatLong]
    - timeBounds: Maybe TimeBound
    - derive: "'HideSecrets"

extraOperations:
  - EXTRA_API_TYPES_FILE
  - EXTRA_API_COMMON_TYPES_FILE
